Ниже — лаконичное ТЗ для разработки SPA «Налоги гражданина РФ» на React без бэкенда, с хранением всех правил/формул на фронте и деплоем на GitHub Pages.

## Цель и рамки
Нужно сделать одностраничное веб‑приложение, которое наглядно показывает, сколько налогов/обязательных платежей платит гражданин РФ в год и в месяц, включая «видимые» (НДФЛ, имущественные) и «скрытые» (НДС/акцизы в покупках).  
Приложение работает полностью офлайн (после загрузки), не отправляет данные пользователя в сеть и не требует регистрации.

## Экран и UX
Структура экранов (1–2 страницы, без сложной навигации):
- **Главный экран**
  - Блок “Итого”: «На руки», «Налоги/взносы», «Эффективная нагрузка %».
  - Визуализация (простая): круг/столбики по категориям налогов.
  - Таблица/список “Расшифровка” с суммой и пояснением «за что».
- **Редактор параметров**
  - Профиль по умолчанию “Средний россиянин” (предзаполненные значения).
  - Поля: зарплата (gross или net), прочие доходы, ежемесячные траты, топливо/алкоголь/табак (опционально), наличие квартиры/авто/земли (упрощённо).

UX‑требования:
- Все изменения параметров пересчитывают результаты мгновенно.
- Везде показывать “что это” и “как считается” (tooltip/аккордеон), но без длинных текстов.

## Модель расчётов (фронт)
Все правила хранятся в репозитории как конфигурация (JSON/TS‑модули) с версионированием по годам (например, `rules/2025.ts`, `rules/2026.ts`).

1) НДФЛ (резидент, основной доход)
- Реализовать прогрессивную шкалу 2025: 13% до 2,4 млн ₽/год; 15% на часть 2,4–5 млн; 18% на часть 5–20 млн; 20% на часть 20–50 млн; 22% на часть свыше 50 млн.[1][2][3][4]
- Важно: повышенная ставка применяется только к части дохода сверх порога (маржинально), а не ко всей сумме.[2][1]

2) Страховые взносы работодателя (для визуализации «стоимость сотрудника»)
- Базовый тариф 30% до предельной базы 2 759 000 ₽ в 2025 году, после превышения — 15,1%.[5][6][7]
- В MVP не учитывать льготные тарифы/МСП; сделать чекбокс “учитывать льготы” как заглушку (disabled) для будущих версий.

3) Имущественные налоги (упрощённо, без региональных ставок)
- Налог на имущество: считать по введённой пользователем “годовой сумме” (ручной ввод) + подсказка “посмотрите в уведомлении ФНС”.
- Транспортный/земельный: аналогично (ручной ввод годовой суммы), либо “мощность/кадастровая” — как расширение v2.

4) Косвенные налоги в расходах (оценка)
- НДС: оценочно считать как долю от трат, параметр “эффективная доля НДС в расходах” задаётся в настройках правил (например, 10–16% по умолчанию) и может быть отредактирован пользователем.
- Акцизы: опциональные блоки (топливо/алкоголь/табак) — ввод “трат в месяц” × “доля акциза” (конфиг).

Требования к математике:
- Все расчёты в копейках (integer) внутри, вывод с округлением до ₽.
- Отдельные функции: `calcNdflProgressive()`, `calcEmployerContrib()`, `calcVatEstimate()` и т.д., + агрегатор `calcTotals(profile, rules)`.

## Технологии и ограничения
- Стек: React + TypeScript + Vite, стейт — Zustand, UI — shadcn ui.
- Хранение состояния: URL (query params) для шаринга + LocalStorage для автосохранения профиля.
- Роутинг: либо без роутера (1 страница), либо HashRouter; для GitHub Pages критично избежать 404 на перезагрузке вложенных роутов (типичные решения: HashRouter или SPA‑fallback через 404.html).[8][9]

## Деплой, качество и приёмка
Деплой:
- GitHub Pages через GitHub Actions: сборка `vite build`, публикация `dist/`.
- Базовый smoke‑тест в CI: `npm ci && npm run build && npm test`.

Тесты:
- Unit‑тесты на расчёты (Vitest/Jest): кейсы на границы порогов НДФЛ и предельной базы взносов.[6][1]

Критерии приёмки:
- Приложение открывается на GitHub Pages и корректно работает без бэкенда.
- Любое изменение параметров профиля пересчитывает итог ≤ 50 мс на средних устройствах.
- Для тестовых кейсов (набор фиксированных входов) результаты НДФЛ и взносов совпадают с ожидаемыми значениями в тестах.
